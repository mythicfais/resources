{
"width": 900,
"height": 560,
"padding": {"top": 25, "left": 0, "right": 0, "bottom": 0},

"data": [
  {
    "name": "states",
    "url": "https://raw.githubusercontent.com/mythicfais/resources/master/us-10m.json",
    "format": {"type": "topojson", "feature": "states"},
    "transform": [
      {
        "type": "geopath", "projection": "albersUsa",
        "scale": 1200, "translate": [450, 280]
      }
    ]
  },
  {
    "name": "losses",
    "url": "https://raw.githubusercontent.com/mythicfais/resources/master/losses2015_transformed.csv",
    "format": {"type": "csv", "parse": {"Amount": "number"}},
    "transform": [
      { "type": "geopath", "projection": "albersUsa" },
      { "type": "lookup", "on": "losses", "onKey": "State_Code",
        "keys": ["id"], "as": ["losses"] },
      { "type": "filter",
        "test": "datum.layout_path!=null && datum.losses!=null" }
    ]
  }
],

"marks": [
  {
    "type": "path",
    "from": {"data": "states"},
    "properties": {
      "enter": {
        "path": {"field": "layout_path"},
        "fill": {"value": "#dedede"},
        "stroke": {"value": "white"}
      },
      "update": {
        "path": {"field": "layout_path"},
        "fill": {"value": {"scale": "color", "field": "losses.Amount"}}
      },
      "hover": {
        "fill": {"value": "purple"}
      }
    }
  }
]
}
